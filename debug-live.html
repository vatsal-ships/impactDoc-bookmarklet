<!DOCTYPE html>
<html>
<head>
    <title>Debug Live GitHub Pages Loading</title>
</head>
<body>
    <h1>Debug Live GitHub Pages Loading</h1>
    <button onclick="testDirectLoad()">Test Direct Load</button>
    <button onclick="testBookmarkletLoad()">Test Bookmarklet Load</button>
    <div id="output"></div>

    <script>
        function log(message) {
            document.getElementById('output').innerHTML += '<p>' + message + '</p>';
            console.log(message);
        }

        function testDirectLoad() {
            log('Testing direct load from GitHub Pages...');
            const script = document.createElement('script');
            script.src = 'https://vatsal-ships.github.io/impactDoc-bookmarklet/bookmarklet-main.js?v=' + Date.now();
            script.onload = function() {
                log('✅ Direct load SUCCESS - script loaded');
                if (typeof window.initImpactDoc === 'function') {
                    log('✅ initImpactDoc function found');
                } else {
                    log('❌ initImpactDoc function NOT found');
                }
            };
            script.onerror = function() {
                log('❌ Direct load FAILED');
            };
            document.head.appendChild(script);
        }

        function testBookmarkletLoad() {
            log('Testing bookmarklet-style load...');
            // Simulate the exact bookmarklet loading process
            if(document.getElementById('browser-page-impact-dialog')){
                log('Dialog already exists, skipping');
                return;
            }
            if(window.impactDocLoading){
                log('Already loading, skipping');
                return;
            }
            window.impactDocLoading=true;
            var s=document.createElement('script');
            s.src='https://vatsal-ships.github.io/impactDoc-bookmarklet/bookmarklet-main.js?v='+(Date.now());
            s.onload=function(){
                try{
                    window.impactDocLoading=false;
                    log('✅ Bookmarklet load SUCCESS - script loaded');
                    if(typeof window.initImpactDoc==='function'){
                        log('✅ initImpactDoc function found');
                        // Don't actually init, just test
                        log('Ready to initialize (skipping actual init for test)');
                    }else{
                        log('❌ initImpactDoc function NOT found');
                    }
                }catch(e){
                    log('❌ Bookmarklet load ERROR: ' + e.message);
                }
            };
            s.onerror=function(){
                window.impactDocLoading=false;
                log('❌ Bookmarklet load FAILED - network error');
            };
            document.head.appendChild(s);
        }
    </script>
</body>
</html> 